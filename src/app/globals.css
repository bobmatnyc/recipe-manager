@import url("https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&family=Inter:wght@300;400;500;600;700&display=swap");

@import "tailwindcss";
@import "leaflet/dist/leaflet.css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-heading: "Playfair Display", serif;
  --font-body: "Lora", serif;
  --font-ui: "Inter", sans-serif;

  /* Joanie's Kitchen Brand Colors */
  --color-jk-olive: #5b6049;
  --color-jk-sage: #a7bea4;
  --color-jk-linen: #faf5ee;
  --color-jk-tomato: #e65f45;
  --color-jk-clay: #b46945;
  --color-jk-charcoal: #333333;

  /* Mapped to theme tokens */
  --color-primary: var(--jk-olive);
  --color-primary-foreground: #ffffff;
  --color-secondary: var(--jk-clay);
  --color-secondary-foreground: #ffffff;
  --color-accent: var(--jk-sage);
  --color-accent-foreground: var(--jk-charcoal);
  --color-muted: var(--jk-linen);
  --color-muted-foreground: var(--jk-charcoal);
  --color-destructive: #dc2626;
  --color-destructive-foreground: #ffffff;

  --color-ring: var(--jk-sage);
  --color-input: var(--jk-sage);
  --color-border: var(--jk-sage);
  --color-popover: #ffffff;
  --color-popover-foreground: var(--jk-charcoal);
  --color-card: #ffffff;
  --color-card-foreground: var(--jk-charcoal);

  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
  --radius-xl: 12px;
  --radius-jk: 8px;

  /* Mobile breakpoints */
  --breakpoint-xs: 320px;
  --breakpoint-sm: 640px;
  --breakpoint-md: 768px;
  --breakpoint-lg: 1024px;
  --breakpoint-xl: 1280px;
  --breakpoint-2xl: 1536px;

  /* Safe area insets for notched devices */
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);

  /* Touch target sizes */
  --touch-target-min: 44px; /* iOS minimum */
  --touch-target-material: 48px; /* Material Design minimum */
}

:root {
  /* Joanie's Kitchen Color Palette */
  --jk-olive: #5b6049; /* Primary/Header/Footer */
  --jk-sage: #a7bea4; /* Accents/Dividers */
  --jk-linen: #faf5ee; /* Background/Containers */
  --jk-tomato: #e65f45; /* CTAs/Buttons/Highlights */
  --jk-clay: #b46945; /* Icons/Links/Secondary Buttons */
  --jk-charcoal: #333333; /* Text */

  /* Base theme variables */
  --radius: 8px;
  --background: var(--jk-linen);
  --foreground: var(--jk-charcoal);
  --card: #ffffff;
  --card-foreground: var(--jk-charcoal);
  --popover: #ffffff;
  --popover-foreground: var(--jk-charcoal);
  --primary: var(--jk-olive);
  --primary-foreground: #ffffff;
  --secondary: var(--jk-clay);
  --secondary-foreground: #ffffff;
  --muted: var(--jk-linen);
  --muted-foreground: var(--jk-charcoal);
  --accent: var(--jk-sage);
  --accent-foreground: var(--jk-charcoal);
  --destructive: #dc2626;
  --border: var(--jk-sage);
  --input: var(--jk-sage);
  --ring: var(--jk-sage);
}

.dark {
  /* Dark mode with earthy tones */
  --background: #2a2a2a;
  --foreground: var(--jk-linen);
  --card: #3a3a3a;
  --card-foreground: var(--jk-linen);
  --popover: #3a3a3a;
  --popover-foreground: var(--jk-linen);
  --primary: var(--jk-sage);
  --primary-foreground: var(--jk-olive);
  --secondary: var(--jk-clay);
  --secondary-foreground: #ffffff;
  --muted: #3a3a3a;
  --muted-foreground: var(--jk-sage);
  --accent: var(--jk-olive);
  --accent-foreground: var(--jk-linen);
  --border: #4a4a4a;
  --input: #4a4a4a;
  --ring: var(--jk-sage);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-body), serif;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-heading), serif;
    @apply text-jk-olive;
  }

  a {
    @apply text-jk-clay hover:text-jk-tomato transition-colors;
  }

  button {
    font-family: var(--font-ui), sans-serif;
  }
}

@layer components {
  /* Primary CTA Button - Tomato */
  .btn-primary {
    @apply bg-jk-tomato text-white px-6 py-3 rounded-jk font-ui font-medium;
    @apply hover:bg-jk-tomato/90 transition-all shadow-sm hover:shadow-md;
  }

  /* Secondary Button - Clay */
  .btn-secondary {
    @apply bg-jk-clay text-white px-6 py-3 rounded-jk font-ui font-medium;
    @apply hover:bg-jk-clay/90 transition-all shadow-sm hover:shadow-md;
  }

  /* Recipe Card with parchment aesthetic */
  .recipe-card {
    @apply bg-white border border-jk-sage rounded-jk p-6;
    @apply shadow-sm hover:shadow-md transition-shadow;
    background-image: linear-gradient(to bottom, rgba(250, 245, 238, 0.3), transparent);
  }

  /* Parchment texture background */
  .parchment-texture {
    background-color: var(--jk-linen);
    background-image:
      linear-gradient(to bottom, rgba(250, 245, 238, 0.95), rgba(250, 245, 238, 0.98)),
      url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' /%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.05' /%3E%3C/svg%3E");
  }

  /* Parchment card styling */
  .parchment {
    background-color: white;
    background-image:
      linear-gradient(to bottom, rgba(250, 245, 238, 0.3), rgba(255, 255, 255, 0.1)),
      url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' /%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.03' /%3E%3C/svg%3E");
    @apply border-2 border-jk-sage rounded-jk shadow-sm;
  }

  /* Container with linen background */
  .jk-container {
    @apply bg-jk-linen rounded-jk p-6;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
  }

  /* Divider with sage green */
  .jk-divider {
    @apply border-t border-jk-sage my-8;
  }

  /* Heading styles */
  .jk-heading {
    font-family: var(--font-heading), serif;
    @apply text-jk-olive;
  }

  /* Body text */
  .jk-body {
    font-family: var(--font-body), serif;
    @apply text-jk-charcoal;
  }

  /* Hero section styling */
  .jk-hero {
    @apply bg-jk-olive text-white py-20 px-4;
  }

  /* Input fields */
  .jk-input {
    @apply bg-white border border-jk-sage rounded-jk px-4 py-2;
    @apply focus:outline-none focus:ring-2 focus:ring-jk-tomato focus:border-transparent;
    @apply transition-all;
  }

  /* Custom prose styles for markdown */
  .prose-jk {
    --tw-prose-body: var(--jk-charcoal);
    --tw-prose-headings: var(--jk-olive);
    --tw-prose-lead: var(--jk-charcoal);
    --tw-prose-links: var(--jk-clay);
    --tw-prose-bold: var(--jk-olive);
    --tw-prose-counters: var(--jk-clay);
    --tw-prose-bullets: var(--jk-sage);
    --tw-prose-hr: var(--jk-sage);
    --tw-prose-quotes: var(--jk-olive);
    --tw-prose-quote-borders: var(--jk-sage);
    --tw-prose-captions: var(--jk-charcoal);
    --tw-prose-code: var(--jk-tomato);
    --tw-prose-pre-code: var(--jk-linen);
    --tw-prose-pre-bg: var(--jk-charcoal);
    --tw-prose-th-borders: var(--jk-sage);
    --tw-prose-td-borders: var(--jk-sage);
  }
}

/* Mobile-First Optimizations */
@layer utilities {
  /* Touch targets - ensure minimum size for mobile interactions */
  .touch-target {
    min-height: var(--touch-target-min);
    min-width: var(--touch-target-min);
  }

  .touch-target-material {
    min-height: var(--touch-target-material);
    min-width: var(--touch-target-material);
  }

  /* Safe area spacing for notched devices */
  .safe-top {
    padding-top: var(--safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: var(--safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: var(--safe-area-inset-left);
  }

  .safe-right {
    padding-right: var(--safe-area-inset-right);
  }

  .safe-x {
    padding-left: var(--safe-area-inset-left);
    padding-right: var(--safe-area-inset-right);
  }

  .safe-y {
    padding-top: var(--safe-area-inset-top);
    padding-bottom: var(--safe-area-inset-bottom);
  }

  /* Prevent text selection on interactive elements */
  .no-select {
    -webkit-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  /* Mobile tap feedback */
  .tap-feedback {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
    transition: opacity 0.15s ease-in-out;
  }

  .tap-feedback:active {
    opacity: 0.7;
  }
}

/* Mobile Typography and Layout */
@media (max-width: 768px) {
  html {
    /* Prevent iOS zoom on input focus */
    font-size: 16px;
  }

  body {
    /* Improve font rendering on mobile */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-size-adjust: 100%;
  }

  /* Touch-friendly inputs - prevent iOS zoom */
  input,
  select,
  textarea,
  button {
    font-size: 16px;
    line-height: 1.5;
  }

  /* Prevent horizontal scroll */
  body {
    overflow-x: hidden;
  }

  /* Optimize hero text for mobile */
  .jk-hero h1 {
    font-size: 2.5rem;
    line-height: 1.2;
  }

  .jk-hero p {
    font-size: 1.125rem;
  }
}

/* Extra small devices (iPhone SE, etc.) */
@media (max-width: 375px) {
  .jk-hero h1 {
    font-size: 2rem;
  }

  /* Tighter padding on small screens */
  .container {
    padding-left: 1rem;
    padding-right: 1rem;
  }
}

/* Safe area insets for notched devices (iPhone X+, etc.) */
@supports (padding: env(safe-area-inset-top)) {
  body {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }

  header {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  footer {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Touch-friendly button styling */
.btn,
button,
a[role="button"] {
  min-height: 44px;
  min-width: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.5rem 1rem;
}

/* Mobile-optimized card hover states (use active instead) */
@media (hover: none) and (pointer: coarse) {
  .recipe-card:hover {
    transform: none;
    box-shadow: none;
  }

  .recipe-card:active {
    transform: scale(0.98);
    transition: transform 0.1s ease-in-out;
  }
}

/* Leaflet Map Custom Styles - Match Joanie's Kitchen Theme */
.leaflet-popup-content-wrapper {
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(91, 96, 73, 0.2);
}

.leaflet-popup-content {
  margin: 0;
  padding: 0;
  font-family: var(--font-body), serif;
  color: var(--jk-charcoal);
}

.leaflet-popup-tip {
  background-color: white;
  border: 1px solid rgba(91, 96, 73, 0.2);
}

.leaflet-container a.leaflet-popup-close-button {
  color: var(--jk-olive);
}

.leaflet-container a.leaflet-popup-close-button:hover {
  color: var(--jk-tomato);
}

/* Custom marker cluster styles (if needed in future) */
.marker-cluster {
  background-color: rgba(167, 190, 164, 0.6);
}

.marker-cluster div {
  background-color: rgba(91, 96, 73, 0.8);
  color: white;
}
